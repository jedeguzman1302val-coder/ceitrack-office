<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Permissions-Policy" content="accelerometer=(), ambient-light-sensor=(), autoplay=(), battery=(), camera=(), cross-origin-isolated=(), display-capture=(), document-domain=(), encrypted-media=(), execution-while-not-rendered=(), execution-while-out-of-viewport=(), fullscreen=(), geolocation=(), gyroscope=(), keyboard-map=(), magnetometer=(), microphone=(), midi=(), navigation-override=(), payment=(), picture-in-picture=(), publickey-credentials-get=(), screen-wake-lock=(), sync-xhr=(), usb=(), web-share=(), xr-spatial-tracking=()" />
  <title>Student Company Approval Dashboard</title>

  <!-- Firebase CDN -->
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-storage-compat.js"></script>
  
  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="studenthte.css">
  <link rel="stylesheet" href="company-details.css">
</head>

<body>
    <!-- Sidebar Navigation -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h2>CEITRACK</h2>
        </div>
        <ul class="sidebar-menu">
            <li>
                <a href="/chairpersondashboard/chairdash.html" >
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li>
                <a href="/chairannouncement/chairannounce.html">
                    <i class="fas fa-bullhorn"></i>
                    <span>Announcements</span>
                </a>
            </li>
            <li>
                <a href="/chairpersonaddstudent/addStudent.html">
                    <i class="fas fa-user-plus"></i>
                    <span>Add Student</span>
                </a>
            </li>
            <li>
                <a href="/chairpersonaddadviser/addAdviser.html">
                    <i class="fas fa-user-tie"></i>
                    <span>Add Adviser</span>
                </a>
            </li>
            <li>
                <a href="/chairpersondocument/chairpersondocuments.html">
                    <i class="fas fa-file-alt"></i>
                    <span>Student Documents</span>
                </a>
            </li>
            <li>
                <a href="/chairpersonstudentstatus/chairpersonstudentstatus.html">
                    <i class="fas fa-users"></i>
                    <span>Student Status</span>
                </a>
            </li>
            <li>
                <a href="/chairpersonstudenthte/studenthte.html" class="active">
                    <i class="fas fa-clipboard-check"></i>
                    <span>Student HTE</span>
                </a>
            </li>
           <li>
                <a href="/chatchairperson/chatchair.html">
                    <i class="fas fa-comments"></i>
                    <span>Message</span>
                </a>
            </li>
            <li>
                <a href="#" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </a>
            </li>
        </ul>
    </div>

    <!-- Main Content Area -->
    <div class="main-content-wrapper">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <button class="sidebar-toggle">
                    <i class="fas fa-bars"></i>
                    <i class="fas fa-times"></i>
                </button>
                <h1 class="header-title">
                    <i class="fas fa-clipboard-check"></i>
                    Student HTE Approvals
                </h1>
            </div>
            <div class="user-profile">
                <img src="https://ui-avatars.com/api/?name=Chair+Person&background=3f37c9&color=fff" alt="User">
                <div class="user-info">
                    <span class="user-name" id="header-username">Chairperson</span>
                    <span class="user-role">Department <span id="chairdepartment"></span></span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Students Container -->
            <div class="students-container">
                <div class="student-list-header">
                    <div class="search-container">
                        <div class="search-filter-wrapper">
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" id="studentSearch" placeholder="Search students..." oninput="filterStudents()">
                            </div>
                            <div class="filter-dropdown-wrapper">
                                <i class="fas fa-layer-group"></i>
                                <select id="sectionFilter" class="section-filter-dropdown" onchange="filterBySection(this.value)"></select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Student List -->
                <div id="studentList" class="student-list">
                    <!-- Students will be populated here -->
                </div>
            </div>

            <!-- Company Details Area -->
            <div class="company-details-area">
                <!-- Empty State -->
                <div id="contentEmpty" class="empty-state">
                    <div class="icon"><i class="fas fa-user-check"></i></div>
                    <h3>Select a student to see details</h3>
                    <p>Choose a student from the list on the left to view their company submission, status, and perform approvals.</p>
                </div>

                <!-- Company Details -->
                <div id="contentLoaded" style="display: none;">
                    <div class="company-profile">
                        <!-- Company Header with Logo and Basic Info -->
                        <div class="company-header">
                            <div class="header-main-content">
                                <div class="logo-circle">
                                    <img id="logo-preview" class="company-logo" src="https://via.placeholder.com/120?text=No+Logo" alt="Company Logo">
                                </div>
                                <h2 id="hteName" class="company-name-below empty-value">HTE Company Name</h2>
                                <p id="submissionDate" class="submission-date"></p>
                                <a id="companywebsite" href="#" target="_blank" style="display: none;">
                                    <i class="fas fa-globe"></i>
                                    <span></span>
                                </a>
                            </div>
                            <div id="companyStatusContainer" style="display: none;">
                                <span id="companyStatus" class="status-badge"></span>
                            </div>
                        </div>

                        <!-- Company Details Grid -->
                        <div class="details-grid">
                            <div class="detail-card">
                                <h4><i class="fas fa-building"></i> Official Address</h4>
                                <p id="hteAddress" class="empty-value">Not specified</p>
                            </div>
                            <div class="detail-card">
                                <h4><i class="fas fa-user-tie"></i> Representative</h4>
                                <p id="hteRepresentative" class="empty-value">Not specified</p>
                            </div>
                            <div class="detail-card">
                                <h4><i class="fas fa-id-badge"></i> Designation</h4>
                                <p id="hteDesignation" class="empty-value">Not specified</p>
                            </div>
                            <div class="detail-card">
                                <h4><i class="fas fa-envelope"></i> Email Address</h4>
                                <p id="hteEmail" class="empty-value">Not specified</p>
                            </div>
                            <div class="detail-card">
                                <h4><i class="fas fa-mobile-alt"></i> Mobile Number</h4>
                                <p id="hteMobile" class="empty-value">Not specified</p>
                            </div>
                            <div class="detail-card">
                                <h4><i class="fas fa-phone"></i> Landline</h4>
                                <p id="hteLandline" class="empty-value">Not specified</p>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="action-buttons" style="display: none;">
                            <button id="verify-btn" class="btn btn-verify" onclick="openBusinessSearch()">
                                <i class="fas fa-search"></i> Verify Business
                            </button>
                            <button id="approve-btn" class="btn btn-approve" onclick="updateCompanyStatus('Approved')">
                                <i class="fas fa-check"></i> Approve Company
                            </button>
                            <button id="reject-btn" class="btn btn-reject" onclick="updateCompanyStatus('Rejected')">
                                <i class="fas fa-times"></i> Reject Company
                            </button>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Business Search Modal -->
    <div id="businessSearchModal" class="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeBusinessSearch()">
                <i class="fas fa-times"></i>
            </button>
            <iframe id="businessSearchIframe" src="https://bnrs.dti.gov.ph/search"></iframe>
        </div>
    </div>

    <!-- Result Modal (Success/Error) -->
    <div id="resultModal" class="modal message-modal" style="display:none;">
        <div class="modal-content modal-sm">
            <div class="modal-body">
                <p id="resultMessage">Status message here</p>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn btn-primary" id="resultOkBtn">OK</button>
            </div>
        </div>
    </div>

    <!-- Global Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display:none;">
        <div class="loading-card">
            <div class="loader-spinner"></div>
            <div class="loading-text">Processing...</div>
        </div>
    </div>

    <script src="studenthte.js"></script>
</body>
</html>